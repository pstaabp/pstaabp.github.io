<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ch-15</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="data-in-maple">Data in Maple</h1>
<p><a href="index.html">Return to all notes</a></p>
<p>Although there is much better software to use for Data Analysis than Maple, here are some things to know.</p>
<h2 id="dataframes">DataFrames</h2>
<p>In many cases, dealing with data mean dealing with variables of different types. Because of this, matrices or arrays are not the best storage types.</p>
<p>A <code>DataFrame</code> is a common type of data structure across many languages which are designed for use with data. A data frame is a rectangular data structure in which each column has a different type.</p>
<p>Consider the following list of people:</p>
<table>
<thead>
<tr class="header">
<th>First Name</th>
<th>Last Name</th>
<th>Gender</th>
<th>Age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Homer</td>
<td>Simpson</td>
<td>Male</td>
<td>35</td>
</tr>
<tr class="even">
<td>Marge</td>
<td>Simpson</td>
<td>Female</td>
<td>34</td>
</tr>
<tr class="odd">
<td>Bart</td>
<td>Simpson</td>
<td>Male</td>
<td>10</td>
</tr>
<tr class="even">
<td>Lisa</td>
<td>Simpson</td>
<td>Female</td>
<td>8</td>
</tr>
<tr class="odd">
<td>Margaret</td>
<td>Simpson</td>
<td>Female</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>The age variable should be a number (or perhaps an integer) and the others should be strings.</p>
<p>We can create a <code>DataFrame</code> in the following manner.</p>
<pre><code>firsts:=&lt;&quot;Homer&quot;,&quot;Marge&quot;,&quot;Bart&quot;,&quot;Lisa&quot;,&quot;Margaret&quot;&gt;
lasts:=&lt;&quot;Simpson&quot;,&quot;Simpson&quot;,&quot;Simpson&quot;,&quot;Simpson&quot;,&quot;Simpson&quot;&gt;
genders:=&lt;&quot;Male&quot;,&quot;Female&quot;,&quot;Male&quot;,&quot;Female&quot;,&quot;Female&quot;&gt;
ages:=&lt;35,34,10,8,1&gt;</code></pre>
<p>and then</p>
<pre><code>DF := DataFrame(&lt;firsts| lasts | genders | ages&gt;);</code></pre>
<p>which produce a structure that looks like:</p>
<p><span class="math display">\[
\left[ \begin{array}{cccc}
 &amp; 1 &amp; 2 &amp;3 &amp; 4 \newline
1 &amp; &quot;Homer&quot; &amp; &quot;Simpson&quot; &amp; &quot;Male&quot; &amp; 35 \newline
2 &amp;  Marge &amp;  Simpson &amp;  Female &amp;  34 \newline
3 &amp;  Bart &amp;  Simpson &amp;  Male &amp;  10 \newline
4 &amp;  Lisa &amp;  Simpson &amp;  Female &amp;  8 \newline
5 &amp;  Margaret &amp;  Simpson &amp;  Female &amp;  1 \newline
\end{array}
\right]\]</span></p>
<p>where the numbers on the top and left sides are the column and row numbers respectively. This is nice, however, since the columns represent variables, it would be nice to have that included in the dataframe. In addition, the datatypes can be specified.</p>
<pre><code>DF := DataFrame(&lt;firsts| lasts| genders| ages&gt;, columns = &lt;LastName, FirstName, Gender, Age&gt;, datatypes = [string, string, string, integer])</code></pre>
<p>The result is:</p>
<p><span class="math display">\[
\left[ \begin{array}{cccc}
 &amp; FirstName &amp; LastName &amp; Gender &amp; Age \newline
1 &amp; &quot;Homer&quot; &amp; &quot;Simpson&quot; &amp; &quot;Male&quot; &amp; 35 \newline
2 &amp;  Marge &amp;  Simpson &amp;  Female &amp;  34 \newline
3 &amp;  Bart &amp;  Simpson &amp;  Male &amp;  10 \newline
4 &amp;  Lisa &amp;  Simpson &amp;  Female &amp;  8 \newline
5 &amp;  Margaret &amp;  Simpson &amp;  Female &amp;  1 \newline
\end{array}
\right]\]</span></p>
<p>If you want to specify the rows as well (instead of by a number, that can be done with the <code>rows</code> option to the <code>DataFrame</code>).</p>
<p>If you want to access part of the data frame it is similar to that of an array. We can access the 2nd row, 4th column, by</p>
<pre><code>DF[2,4]</code></pre>
<p>or</p>
<pre><code>DF[2,Age]</code></pre>
<p>We can select the enter row by</p>
<pre><code>DF[2,..]</code></pre>
<p>And an entire column:</p>
<pre><code>DF[..,FirstName]</code></pre>
<p>and each of these return a <code>DataSeries</code> type.</p>
<h2 id="importing-data">Importing Data</h2>
<p>Typically data comes from other files or databases. Here we will import data from a CSV file. If you have data in an excel file, typically export it from excel to CSV.</p>
<p>Download <a href="iris.csv">iris.csv</a> and save it to a directory on your computer. Next, select the working directory by clicking the working directory at the bottom of the Maple screen. The working directory below is “/Users/pstaab/code/github.io/sym-comp/notes”</p>
<figure>
<img src="images/ch14/plot01.png" alt="Screen shot of Maple" /><figcaption aria-hidden="true">Screen shot of Maple</figcaption>
</figure>
<p>You will see a directory chooser pop up. Select the directory that contains the file that you downloaded above.</p>
<p>Importing the data is formed by</p>
<pre><code>data:=Import(&quot;iris.csv&quot;)</code></pre>
<p>which (as of Maple 2016) will create a DataFrame automatically. You will probably have to do</p>
<pre><code>df:=DataFrame(data,columns=&lt;SepalLength,SepalWidth,PetalLength,PetalWidth,Species&gt;)</code></pre>
<p>if you don’t have a dataframe.<br />
### Using the <code>with</code> statement and DataFrames</p>
<p>If we type</p>
<pre><code>with(data);</code></pre>
<p>then we can use the columns of the data frame data without the <code>data[..,name]</code> format. For example,</p>
<pre><code>SepalWidth</code></pre>
<p>will return a <code>DataSeries</code> with just the <code>SepalWidth</code> variable.</p>
<h2 id="the-statistics-package">The Statistics package</h2>
<p>Load the Statistics package using <code>with(Statistics):</code> to give easier access to many standard statistics features.</p>
<p>The <code>Mean</code> and <code>StandardDeviation</code> commands will find the mean and standard deviation. For example</p>
<pre><code>Mean(SepalWidth)</code></pre>
<p>which returns 5.843 and</p>
<pre><code>StandardDeviation(PetalWidth)</code></pre>
<p>returns 0.7622</p>
<h3 id="scatter-plots">Scatter Plots</h3>
<p>The <code>ScatterPlot</code> command in Maple will allow you to perform a scatter plot of data from DataFrames. Although this can be done using the <code>pointplot</code> command of the <code>plots</code> package, it’s not simple. Plot SepalWidth versus SepalLength by entering</p>
<pre><code>ScatterPlot(SepalWidth, ﻿SepalLength,symbol=solidcircle)</code></pre>
<p>results in <img src="images/ch14/plot02.png" alt="scatter plot" /></p>
<p>Since there are three different species of iris here, we can color code the different species with</p>
<pre><code>ScatterPlot(SepalWidth, ﻿SepalLength, symbol=solidcircle,  colorscheme = [&quot;valuesplit&quot;, Species])</code></pre>
<p>and the result is <img src="images/ch14/plot03.png" alt="scatter plot" /></p>
<h3 id="subsetting-data">Subsetting Data</h3>
<p>If we look at the scatter plot about, there is the red points in the lower part of the plot. This is the <code>setosa</code> species and perhaps we are interested in studying that.</p>
<p>We can pull out only these data using:</p>
<pre><code>setosa := data[Species=~ &quot;setosa&quot;];</code></pre>
<p>This matches only the rows of the data where the Species is <code>setosa</code>.</p>
<p>Just to make sure this looks right, plot it:</p>
<pre><code>setosaPlot:=ScatterPlot(setosa[..,2],setosa[..,1],symbol=solidcircle)</code></pre>
<p>where the 2nd and 1st columns are plotted. (I had trouble pulling out the data using the column names) The result is:</p>
<figure>
<img src="images/ch14/plot04.png" alt="Plot of the setosa species" /><figcaption aria-hidden="true">Plot of the setosa species</figcaption>
</figure>
<p>The subsetting can be more complex. If we are looking for all points such that the “distance” of the petal info from 1 in width and 2 in length, consider:</p>
<pre><code>data[(PetalWidth-~1)*~(PetalWidth-~1)+~(PetalLength-~2)*(PetalLength-2)&lt;~1]</code></pre>
<p>where the standard operations needs to be followed by a tilde ~ for these operators.</p>
<h2 id="fitting-a-line-to-data">Fitting a Line to Data</h2>
<p>To make the following a bit easier, let’s swap the main data out and put the setosa data in.</p>
<pre><code>unwith(data)
with(setosa)</code></pre>
<p>We can find the best fit line (regression line) using the following:</p>
<pre><code>Fit(b*t+a, convert(SepalWidth, Vector), convert(SepalLength, Vector), t)</code></pre>
<p>where (unfortunately), we first need to convert the DataSeries in the columns to Vectors. The result is</p>
<p><span class="math display">\[-7.68666666666667+5.36285714285714t\]</span></p>
<p>and <code>Fit</code> is quite nice in that nearly any function can be put in. If we plot the line:</p>
<pre><code>line:=plot((#),t=2..5)</code></pre>
<p>where (#) is the line number of the line above and then</p>
<pre><code>plots[display](line,setosaPlot)</code></pre>
<p>returns:</p>
<p><img src="images/ch14/plot05.png" /></p>
<p>and visually this looks good.</p>
</body>
</html>
